{"version":3,"sources":["app.js"],"names":["page","appointment","name","date","time","services","initApp","showServicesDB","showSection","changeSection","next","previous","pagesButtons","showAppointmentData","appointmentName","appointmentDate","denyPastDays","storeAppointmentTime","timeInput","document","querySelector","addEventListener","e","console","log","target","value","timeAppointment","hour","split","showAlert","setTimeout","dateInput","dateNow","Date","dateDeny","getFullYear","getMonth","getDate","min","day","getUTCDay","includes","preventDefault","nameText","trim","length","alert","remove","mensaje","type","createElement","textContent","classList","add","appendChild","recapDiv","firstChild","removeChild","Object","values","noServices","appointmentHeading","innerHTML","appointmentTime","serviceAppointment","servicesHeading","appointmentTotalPrice","forEach","service","price","serviceContainer","serviceText","servicePrice","serviceTotal","parseInt","totalPrice","nextPage","prevPage","previousSection","nextSection","querySelectorAll","link","dataset","step","async","result","fetch","db","json","servicios","servicio","id","nombre","precio","serviceName","serviceDiv","idService","onclick","selectService","error","element","tagName","parentElement","contains","removeService","addService","firstElementChild","nextElementSibling","filter","serviceOBJ"],"mappings":"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","file":"bundle.js","sourcesContent":["let page = 1;\r\n\r\nconst appointment = {\r\n    name = '',\r\n    date = '',\r\n    time = '',\r\n    services: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    initApp();\r\n});\r\n\r\nfunction initApp() {\r\n    showServicesDB();\r\n\r\n    //Indica en qué DIV nos encontramos actualmente según el tab que se pulsa\r\n    showSection();\r\n\r\n    //Oculta o muestra una sección según el tab que se pulsa\r\n    changeSection();\r\n\r\n    next();\r\n    previous();\r\n\r\n    //Comprueba la página actual para ocultar o mostrar la paginación\r\n    pagesButtons();\r\n\r\n    // Muestra el resumen de la cita o mensaje de error en caso de que no se pueda validar correctamente\r\n    showAppointmentData();\r\n\r\n    //Guarda el nombre de la cita en el objeto con nombre 'serviceOBJ'\r\n    appointmentName();\r\n\r\n    //Guarda el día en el que se coge la cita\r\n    appointmentDate();\r\n\r\n    //Deshabilita los días que ya han pasado en el datepicker de la fecha del input del formulario\r\n    denyPastDays();\r\n\r\n    //Guarda la hora de la cita\r\n    storeAppointmentTime();\r\n}\r\n\r\nfunction storeAppointmentTime() {\r\n    //Seleccionamos el input del tiempo en el formulario\r\n    const timeInput = document.querySelector('#time');\r\n    timeInput.addEventListener('input', function(e){\r\n        console.log(e.target.value);\r\n        //Guardamos el valor en timeNow\r\n        const timeAppointment = e.target.value;\r\n        //Usamos el split para que haga una separación de las horas y los minutos, y en este caso lo almacenamos en la variable 'hour' que serán las horas\r\n        const hour = timeAppointment.split(':');\r\n        console.log(hour);\r\n\r\n        //Si la hora seleccionada está entre las 10:00 y las 18:00 el valor de la variable 'timeAppointment' que es el obtenido por medio del input se almacena en el objeto 'appointment' como su parámetro 'time'\r\n        if(hour[0] < 10 || hour[0] > 18){\r\n            showAlert('Esa hora no está disponible', 'error');\r\n            setTimeout(() => {\r\n                timeInput.value = '';\r\n            }, 3000);\r\n        } else {\r\n            appointment.time =  timeAppointment;\r\n        }\r\n    })\r\n}\r\n\r\nfunction denyPastDays() {\r\n    const dateInput = document.querySelector('#date');\r\n    \r\n    //Haciendo esto el 'new Date()' nos va a dar la hora exacta en la que se creó la variable 'dateNow' \r\n    const dateNow = new Date();\r\n    const year = dateNow.getFullYear();\r\n    //Hacemos esto para que por ejemplo Enero sea el mes número 1 y no empiece en el 0\r\n    const month = dateNow.getMonth() + 1;\r\n    const day = dateNow.getDate() + 1;\r\n\r\n    //Formato que queremos: ddd-mm-yyyy\r\n    //Creamos la cadena con los datos y el formato y se la asignamos a la variable 'dateDeny'\r\n    const dateDeny = `${year}-${month}-${day}`;\r\n\r\n    //Hacemos que el atributo 'min' del input de fecha tenga el valor de la variable\r\n    dateInput.min = dateDeny;\r\n\r\n    console.log(dateDeny);\r\n}\r\n\r\nfunction appointmentDate() {\r\n    //Seleccionamos la ID Fecha del Input que está en la línea 43 del index.html, que es en el que hay que escoger la fecha en el formulario\r\n    const dateInput = document.querySelector('#date');\r\n\r\n    //Le ponemos el EventListener de input, que se usa para los propios inputs\r\n    dateInput.addEventListener('input', function(e) {\r\n        //Pillamos el valor de la fecha introducida con el e.target.value (nos devuelve la fecha en String)\r\n        //console.log(e.target.value);\r\n\r\n        //Guardamos el valor de la fecha introducida en el input en la variable 'day', pero esta vez nos va a salir con más información ya que estamos creando un objeto 'Date()'\r\n        \r\n        //getUTCDay nos devuelve le valor del día de la semana en número, concretamente del 0 al 6\r\n        //El Domingo es 0,..., y el Sábado es 6\r\n        const day = new Date(e.target.value).getUTCDay();\r\n\r\n        //Si se selecciona una fecha el domingo le decimos que no es válido\r\n        if([0].includes(day)) {\r\n            //Con esto evitamos que la fecha seleccionada se quede como seleccionada en el input aunque no sea válida y le asignamos el valor de cadena vacía para que un mejor aspecto\r\n            e.preventDefault();\r\n            dateInput.value = '';\r\n            //Utilizamos la función que creamos de mostrar alerta, y le pasamos como primer parámetro el mensaje y como segundo parámetro el tipo de alerta, en este caso es de tipo 'error'\r\n            showAlert('El Domingo no abrimos', 'error');\r\n        } else {\r\n            //En caso de que sea válida la fecha le asignamos el valor (value) del input (la fecha) a la variable 'dateInput' y se lo asignamos a su vez al objeto global creado 'appointment' como valor en su parámetro 'date'\r\n            appointment.date = dateInput.value;\r\n\r\n            //Esto ya nos muestra la información de la cita con el nombre del cliente y la fecha establecidas\r\n            console.log(appointment);\r\n        }\r\n\r\n        //Crea un objeto 'options' que nos genera el día, año y mes gracias a las palabras 'weekday', 'year' y 'month'\r\n        /* const options = {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long'\r\n        } */\r\n        //console.log(day.toLocaleDateString('es-ES', options));\r\n    });\r\n}\r\n\r\nfunction appointmentName() {\r\n    //Seleccionamos la ID Nombre del Input que está en la línea 39 del index.html, que es en el que hay que escribir el nombre en el formulario\r\n    const inputName = document.querySelector('#name');\r\n\r\n    //Le ponemos el EventListener de input, que se usa para los propios inputs\r\n    inputName.addEventListener('input', function (e) {\r\n        //Cada vez que el usuario escribe una letra en el input si hacemos un console log podemos ver que lo pilla, usamos el 'trim()' para quitar espacios en blanco tanto al principio como al final\r\n        const nameText = e.target.value.trim();\r\n        console.log(nameText);\r\n\r\n        //Validar de que 'nameText' tiene que tener contenido y no estar vacío\r\n        //Si el texto introducido en el input (valor de este recogido en la variable nameText) está vacío o es menor de 3 se muestra el error con el showAlert que es una función que hemos definido debajo de esta\r\n        if(nameText === '' || nameText.length < 3) {\r\n            showAlert('Nombre no válido','error');\r\n        } else {\r\n            //Con este código mostramos el error de la alerta ya de primeras, y cuando el usuario escriba 3 o más caracteres se va a quitar el error\r\n            const alert = document.querySelector('.alert');\r\n            if(alert) {\r\n                alert.remove();\r\n            }\r\n            appointment.name = nameText;\r\n        }\r\n    });\r\n}\r\n\r\n//Le damos parámetros de mensaje y error. Mensaje para asignarle el textContent y el tipo para que se sepa que es de type 'error'\r\nfunction showAlert(mensaje, type) {\r\n    //Si ya hay una alerta previa definida, entonces no crear otra según introducimos datos. Con el return detenemos la ejecución del código y se queda ahí\r\n    const previousAlert = document.querySelector('.alert');\r\n    if (previousAlert) {\r\n        return;\r\n    }\r\n\r\n    //Creamos un div donde se pintará la alerta almacenado en la variable 'alert', lo asignamos al mensaje con el (alert.textContent = mensaje;) y luego le añadimos la clase 'alert' para darle el aspecto de mensaje de alerta mediante css\r\n    const alert = document.createElement('DIV');\r\n    alert.textContent = mensaje;\r\n    alert.classList.add('alert');\r\n\r\n    //Si el type del mensaje es 'error' le añadimos la clase 'error'\r\n    if(type === 'error') {\r\n        alert.classList.add('error');\r\n    } else if (type === 'success') {\r\n        alert.classList.add('success');\r\n    }\r\n\r\n    //Insertar en el html donde seleccionamos la clase del formulario, la asignamos a la variable 'form' y luego le hacemos el appendChild para que se pinte justo debajo la variable 'alert', que más arriba vemos que es la DIV que contiene el mensaje\r\n    const form = document.querySelector('form');\r\n    form.appendChild(alert);\r\n\r\n    //Eliminar la alerta almacenada en la variable '.alert' después de 3 segundos con el setTimeout\r\n    setTimeout( function() {\r\n        alert.remove();\r\n    }, 3000);\r\n}\r\n\r\n//Función que muestra los datos de la cita (Crea un párrafo y lo pinta debajo de una div con la clase '.recap-content')\r\nfunction showAppointmentData() {\r\n    //Destructuring\r\n    const { name, date, time, services } = appointment;\r\n\r\n    //Seleccionar el resumen de la cita\r\n    const recapDiv = document.querySelector('.recap-content');\r\n\r\n    //Limpia el html previo\r\n    while(recapDiv.firstChild) {\r\n        recapDiv.removeChild(recapDiv.firstChild);\r\n    }\r\n\r\n    //Validación del objeto 'appointment'\r\n    //Si uno de los campos del formulario está vacío (includes('')), se crea un elemento P y se pinta debajo de la div noServices\r\n    if(Object.values(appointment).includes('')) {\r\n        const noServices = document.createElement('P');\r\n        noServices.textContent = 'Los datos del formulario están incompletos';\r\n\r\n        noServices.classList.add('deny-appointment');\r\n\r\n        //Agregar a recap\r\n        recapDiv.appendChild(noServices);\r\n    } else {\r\n\r\n        const appointmentHeading = document.createElement('H3');\r\n        appointmentHeading.textContent = 'Appointment Recap';\r\n\r\n        //Vamos a mostrar el resumen de la cita o el recap\r\n        const appointmentName = document.createElement('P');\r\n        //Vamos a utilizar innerHTML en vez de textContent para escribir el HTML ha que es lo más conveniente a la hora de querer escribir etiquetas HTML por templateStrings\r\n        appointmentName.innerHTML = `<span>Nombre:</span> ${name}`;\r\n\r\n        const appointmentDate = document.createElement('P');\r\n        appointmentDate.innerHTML = `<span>Fecha:</span> ${date}`;\r\n\r\n        const appointmentTime = document.createElement('P');\r\n        appointmentTime.innerHTML = `<span>Hora:</span> ${time}`;\r\n\r\n        const serviceAppointment = document.createElement('DIV');\r\n        serviceAppointment.classList.add('services-recap');\r\n\r\n        const servicesHeading = document.createElement('H3');\r\n        servicesHeading.textContent = 'Services Recap';\r\n\r\n        serviceAppointment.appendChild(servicesHeading);\r\n\r\n        //Para calcular el total de la cita\r\n        let appointmentTotalPrice = 0;\r\n\r\n        //Iterar sobre el array de servicios\r\n        services.forEach(function(service) {\r\n            //Aplicamos destructuring y así podemos referenciar fácilmente más abajo \r\n            const { name, price } = service;\r\n\r\n            const serviceContainer = document.createElement('DIV');\r\n            serviceContainer.classList.add('service-container');\r\n\r\n            const serviceText = document.createElement('P');\r\n            serviceText.textContent = name;\r\n\r\n            const servicePrice = document.createElement('P');\r\n            servicePrice.textContent = price;\r\n            servicePrice.classList.add('service-price');\r\n\r\n            const serviceTotal = price.split('$');\r\n            //console.log(parseInt( serviceTotal[1].trim() ));\r\n\r\n            appointmentTotalPrice += parseInt( serviceTotal[1].trim() );\r\n\r\n            console.log(typeof(appointmentTotalPrice));\r\n\r\n            //Insertar nombre y precio de servicio en el div. Primero siempre se referencia al artículo padre y dentro del AppendChild es donde va el elemento que queremos insertar\r\n            serviceContainer.appendChild(serviceText);\r\n            serviceContainer.appendChild(servicePrice);\r\n\r\n            serviceAppointment.appendChild(serviceContainer);\r\n\r\n        });\r\n\r\n\r\n        //A la variable recapDiv definida más arriba en esta función le agregamos finalmente el 'appointmentName' que es el elemento HTML creado antes para que se pinte el nombre del valor del input del formulario, y así con el resto de parámetros del objeto 'appointment'\r\n        recapDiv.appendChild(appointmentHeading);\r\n        recapDiv.appendChild(appointmentName);\r\n        recapDiv.appendChild(appointmentDate);\r\n        recapDiv.appendChild(appointmentTime);\r\n\r\n        recapDiv.appendChild(serviceAppointment);\r\n\r\n        const totalPrice = document.createElement('P');\r\n        totalPrice.innerHTML = `<span>Payment total: </span> ${appointmentTotalPrice}`;\r\n\r\n        recapDiv.appendChild(totalPrice);\r\n    }\r\n}\r\n\r\n//Paginación siguiente \r\nfunction next() {\r\n    const nextPage = document.querySelector('#next');\r\n    nextPage.addEventListener('click', function() {\r\n        page++;\r\n\r\n        pagesButtons();\r\n    });\r\n}\r\n\r\n//Paginación anterior\r\nfunction previous() {\r\n    console.log('Anterior');\r\n\r\n    const prevPage = document.querySelector('#previous');\r\n    prevPage.addEventListener('click', function() {\r\n        page--;\r\n\r\n        pagesButtons();\r\n    });\r\n}\r\n\r\n//Funcionalidad de los tres botones de la parte superior\r\nfunction pagesButtons() {\r\n    const nextPage = document.querySelector('#next');\r\n    const prevPage = document.querySelector('#previous');\r\n\r\n    if(page === 1) {\r\n        prevPage.classList.add('hidden');\r\n    } else if(page === 3) {\r\n        nextPage.classList.add('hidden');\r\n        prevPage.classList.remove('hidden');\r\n        showAppointmentData(); //Estamos en la página 3, carga el resumen con los datos de la cita\r\n    } else {\r\n        nextPage.classList.remove('hidden');\r\n        prevPage.classList.remove('hidden');\r\n    }\r\n\r\n    showSection(); //Cambia la sección que se muestra por la de la página\r\n}\r\n\r\n//Función que muestra el contenido de una sección\r\nfunction showSection() {\r\n    //Eliminar la clase 'show-section' de la sección anterior\r\n    const previousSection = document.querySelector('.show-section');\r\n    if (previousSection) {\r\n        previousSection.classList.remove('show-section');\r\n    }\r\n\r\n    const currentSection = document.querySelector(`#step-${page}`);\r\n    currentSection.classList.add('show-section');\r\n\r\n    //Eliminar la classe 'current' de la tab anterior\r\n    const nextSection = document.querySelector('.tabs .current');\r\n    if(nextSection) {\r\n        nextSection.classList.remove('current');\r\n    } \r\n\r\n    //Destaca el tab en el que estamos\r\n    const tab = document.querySelector(`[data-step=\"${page}\"]`);\r\n    tab.classList.add('current');\r\n}\r\n\r\n//Función que cambia de sección según hagas click\r\nfunction changeSection() {\r\n    const links = document.querySelectorAll('.tabs button');\r\n\r\n    //Mismo código que el peoyecto del festival de rap, hacemos lo mismo que en los enlaces de navegación de la navbar superior\r\n    links.forEach( function(link) {\r\n        link.addEventListener('click', function(e) {\r\n            e.preventDefault();\r\n\r\n            page = parseInt(e.target.dataset.step);\r\n\r\n/*             //Agrega la clase 'show-section' donde dimos click\r\n            const section = document.querySelector(`#step-${page}`);\r\n            section.classList.add('show-section');\r\n\r\n            //Agrega la clase 'current' donde dimos click\r\n            const tab = document.querySelector(`[data-step=\"${page}\"]`);\r\n            tab.classList.add('current'); */\r\n\r\n            //Llamar la función de mostrar section\r\n            showSection();\r\n\r\n            pagesButtons();\r\n        });\r\n    });\r\n}\r\n\r\n//Función asíncrona que coge los datos del archivo JSON en el que están los servicios de peluquería\r\nasync function showServicesDB() {\r\n    try {\r\n        const result = await fetch('./servicios.json');\r\n        const db = await result.json();\r\n\r\n        //Usamos el destructuring\r\n        const {\r\n            servicios\r\n        } = db;\r\n\r\n        //Podemos generar desde aquí el html\r\n        servicios.forEach(servicio => {\r\n            //Seguimos usando destructuring para coger esos valores de \"servicio\", en vez de hacer servicio.id, servicio.nombre y servicio.precio\r\n            const {\r\n                id,\r\n                nombre,\r\n                precio\r\n            } = servicio;\r\n\r\n            //DOM Scripting\r\n            //Generar el nombre del servicio\r\n            const serviceName = document.createElement('P');\r\n            serviceName.textContent = nombre;\r\n            serviceName.classList.add('service-name');\r\n\r\n            //Generar el precio del servicio\r\n            const servicePrice = document.createElement('P');\r\n            servicePrice.textContent = `${precio} $`;\r\n            servicePrice.classList.add('service-price');\r\n\r\n            //Generar div contenedor \r\n            const serviceDiv = document.createElement('DIV');\r\n            serviceDiv.classList.add('service');\r\n            serviceDiv.dataset.idService = id;\r\n\r\n            //Selecciona un servicio para la cita y le cambia el color cuando está seleccionado\r\n            serviceDiv.onclick = selectService;\r\n\r\n            //Inyectar precio y nombre al div de servicio\r\n            serviceDiv.appendChild(serviceName);\r\n            serviceDiv.appendChild(servicePrice);\r\n\r\n            document.querySelector('#services').appendChild(serviceDiv);\r\n\r\n            console.log(serviceDiv);\r\n        })\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n//Función que le añade o le quita la clase '.selected' si está pulsado o no\r\nfunction selectService(e) {\r\n\r\n    let element;\r\n    //Forzar que el elemento sobre el cual hacemos click sea el div\r\n    if(e.target.tagName === 'P') {\r\n        element = e.target.parentElement;\r\n    } else {\r\n        element = e.target;\r\n    }\r\n\r\n    //Hacemos una comprobación con el '.contains' sobre si tiene la clase con nombre \"selected\", si la tiene se la quitamos a la hora de hacer click, y si no la tiene se la añadimos. Esta clase se utilizará en  css para darle un color al fondo\r\n    if(element.classList.contains('selected')) {\r\n        element.classList.remove('selected');\r\n\r\n        const id = parseInt( element.dataset.idService );\r\n\r\n        removeService(id);\r\n    } else {\r\n        element.classList.add('selected');\r\n\r\n        //Crea un objeto y le pasa todos los valores que tiene el servicio, que en este caso son el id, el nombre y el precio\r\n        const serviceOBJ = {\r\n            id: parseInt(element.dataset.id),\r\n            name: element.firstElementChild.textContent,\r\n            price: element.firstElementChild.nextElementSibling.textContent // element.lastElementChild.textContent\r\n        }\r\n\r\n        addService(serviceOBJ);\r\n    }\r\n}\r\n\r\nfunction removeService(id) {\r\n    const { services } = appointment; \r\n    appointment.services = services.filter(service => service.id !== id);\r\n}\r\n\r\nfunction addService(serviceOBJ) {\r\n    const { services } = appointment;\r\n    //Con esta línea cogemos el array de 'services' y le añadimos al final el serviceOBJ (es parecido al array.push)\r\n    appointment.services = [...services, serviceOBJ];\r\n}"]}